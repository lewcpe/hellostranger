<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Hello Strager is a social network designed for privacy-concerned people. It will make sure anything you post never spread wider than those you intended to.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Hello Stranger</title>

    <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.1.2/firebase-storage.js"></script>

    <!-- jQuery -->
    <script type="text/javascript" src="lib/jquery/jquery-2.1.1.min.js"></script>

    <!-- materialize -->
    <link type="text/css" rel="stylesheet" href="lib/materialize/css/materialize.min.css"  media="screen,projection"/>
    <script type="text/javascript" src="lib/materialize/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- app -->
    <script type="text/javascript" src="js/common.js"></script>
    <script type="text/javascript" src="js/config.js"></script>
  </head>
  <body>

    <nav class="teal" role="navigation">
    <div class="nav-wrapper container">
        <a id="logo-container" href="#" class="brand-logo">Logo</a>
        <ul class="right hide-on-med-and-down">
          <li><a href="#">Action A</a></li>
          <li><a href="#">Action B</a></li>
        </ul>
        <ul id="nav-mobile" class="side-nav">
          <li><a href="#">Action A</a></li>
          <li><a href="#">Action B</a></li>
        </ul>
        <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
      </div>
    </nav>
    <div class="container">

      <h5>
        <i class="material-icons">add</i>
        Add Profile
      </h5>
      <div class="row">
        <div class="input-field col s12">
          <input id="name" type="text" class="validate">
          <label for="name">Name</label>
        </div>
        <div class="input-field col s12">
          <textarea id="bio" class="materialize-textarea"></textarea>
          <label for="bio">Bio</label>
        </div>
      </div>
      <div class="file-field input-field">
        <div class="btn">
          <span>Photo</span>
          <input id='photo' type="file">
        </div>
        <div class="file-path-wrapper">
          <input class="file-path validate" type="text">
        </div>
      </div>
      <div class="row right-align">
        <div class="col s12">
          <button id='submit' class="btn waves-effect waves-light" type="submit" name="action">Submit</button>
        </div>
      </div>

    </div>

    <!-- loading modal -->
    <div id="loading-modal" class="modal">
      <div class="modal-content">
        <h5>Loading..</h5>
        <div class="progress">
          <div class="indeterminate"></div>
        </div>
      </div>
    </div>

    <!-- check logged-in -->
    <script src="js/auth.js"></script>

    <!-- EOF scripts -->
    <script type="text/javascript" src="js/ui.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/random_name.js"></script>
    <script type="text/javascript" src="lib/bio-gen/inherit.js"></script>
    <script type="text/javascript" src="lib/bio-gen/PhraseValidator.js"></script>
    <script type="text/javascript" src="lib/bio-gen/bioGrammar.js"></script>
    <script type="text/javascript" src="lib/bio-gen/Rewriter.js"></script>
    <script type="text/javascript" src="lib/bio-gen/parser.js"></script>
    <script type="text/javascript" src="lib/bio-gen/token.js"></script>
    <script type="text/javascript">
      // start with random values
      $('#name').val(generateName());
      var rewriter = new Rewriter();
      $('#bio').val(rewriter.FullSubstitution("<bio>", bioGrammar));
      // bind submit button
      $('.btn#submit').click(function(){
        $('#loading-modal').modal('open');
        var displayname = $('#name').val();
        var bio = $('#bio').val();
        var pic = '<3'; // TODO add later
        create_new_profile(displayname, bio, pic).then(function(a, b, c){
          location.href = './index.html';
        });
      });
    </script>
  </body>
</html>
